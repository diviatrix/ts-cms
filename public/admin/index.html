<!DOCTYPE html>
<html>
  <head>
    <title>Admin Page</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="main-content">
      <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-10">
          <!-- Navigation will be included here -->
          <div id="navPlaceholder"></div>

          <h1 class="mt-4">Admin Panel</h1>

          <ul class="nav nav-tabs" id="adminTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="true">Users</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="records-tab" data-bs-toggle="tab" data-bs-target="#records" type="button" role="tab" aria-controls="records" aria-selected="false">Records</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="themes-tab" data-bs-toggle="tab" data-bs-target="#themes" type="button" role="tab" aria-controls="themes" aria-selected="false">Themes</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="cms-settings-tab" data-bs-toggle="tab" data-bs-target="#cms-settings" type="button" role="tab" aria-controls="cms-settings" aria-selected="false">CMS Settings</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="test-pages-tab" data-bs-toggle="tab" data-bs-target="#test-pages" type="button" role="tab" aria-controls="test-pages" aria-selected="false">Test Pages</button>
            </li>
          </ul>

          <div class="tab-content" id="adminTabContent">
            <div class="tab-pane fade show active" id="users" role="tabpanel" aria-labelledby="users-tab">
              <div class="row mt-4">
                <div class="col-md-4">
                  <h2>Users</h2>
                  <ul id="userList" class="list-group">
                    <!-- User list will be populated by JavaScript -->
                  </ul>
                </div>
                <div class="col-md-8">
                  <div id="profileEditTab" class="card d-none">
                    <div class="card-body">
                      <h2 class="card-title text-center">Edit User Profile</h2>
                      <div id="adminProfileInfo" data-current-user-id="">
                        <label for="adminServerAnswerTextarea" class="form-label">Server Answer (editable JSON):</label>
                        <textarea id="adminServerAnswerTextarea" class="form-control" rows="16"></textarea>
                      </div>
                      <button id="adminSaveButton" class="btn btn-success btn-sm mt-3">Save Changes</button>
                      <div id="adminMessageDiv" class="mt-3 text-center"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="records" role="tabpanel" aria-labelledby="records-tab">
              <div class="row mt-4">
                <div class="col-md-4">
                  <h2>Records</h2>
                  <button id="newRecordButton" class="btn btn-primary mb-3">Create New Record</button>
                  <ul id="recordList" class="list-group">
                    <!-- Record list will be populated by JavaScript -->
                  </ul>
                </div>
                <div class="col-md-8">
                  <div id="recordEditTab" class="card d-none">
                    <div class="card-body">
                      <h2 class="card-title text-center">Edit Record</h2>
                      <div id="recordInfo" data-current-record-id="">
                        <label for="recordTitle" class="form-label">Title:</label>
                        <input type="text" id="recordTitle" class="form-control mb-2">
                        <label for="recordDescription" class="form-label">Description:</label>
                        <input type="text" id="recordDescription" class="form-control mb-2">
                        <label for="recordContent" class="form-label">Content (Markdown):</label>
                        <textarea id="recordContent" class="form-control mb-2" rows="10"></textarea>
                        <label for="recordTags" class="form-label">Tags (comma-separated):</label>
                        <input type="text" id="recordTags" class="form-control mb-2">
                        <label for="recordCategories" class="form-label">Categories (comma-separated):</label>
                        <input type="text" id="recordCategories" class="form-control mb-2">
                        <div class="form-check mb-3">
                          <input class="form-check-input" type="checkbox" id="recordIsPublished">
                          <label class="form-check-label" for="recordIsPublished">
                            Published
                          </label>
                        </div>
                      </div>
                      <button id="recordSaveButton" class="btn btn-success btn-sm mt-3">Save Record</button>
                      <button id="recordDeleteButton" class="btn btn-danger btn-sm mt-3 ms-2">Delete Record</button>
                      <div id="recordMessageDiv" class="mt-3 text-center"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="themes" role="tabpanel" aria-labelledby="themes-tab">
              <div class="row mt-4">
                <div class="col-md-4">
                  <h2>Themes</h2>
                  <button id="newThemeButton" class="btn btn-primary mb-3">Create New Theme</button>
                  <ul id="themeList" class="list-group">
                    <!-- Theme list will be populated by JavaScript -->
                  </ul>
                </div>
                <div class="col-md-8">
                  <div id="themeEditTab" class="card d-none">
                    <div class="card-body">
                      <h2 class="card-title text-center">Edit Theme</h2>
                      <div id="themeInfo" data-current-theme-id="">
                        <label for="themeName" class="form-label">Theme Name:</label>
                        <input type="text" id="themeName" class="form-control mb-2">
                        <label for="themeDescription" class="form-label">Description:</label>
                        <textarea id="themeDescription" class="form-control mb-2" rows="3"></textarea>
                        <div class="form-check mb-3">
                          <input class="form-check-input" type="checkbox" id="themeIsActive">
                          <label class="form-check-label" for="themeIsActive">
                            Set as Active Theme
                          </label>
                        </div>
                        <h4>Theme Settings</h4>
                        <div id="themeSettings">
                          <div class="row mb-2">
                            <div class="col-md-6">
                              <label for="primaryColor" class="form-label">Primary Color:</label>
                              <input type="color" id="primaryColor" class="form-control form-control-color" value="#00FF00">
                            </div>
                            <div class="col-md-6">
                              <label for="secondaryColor" class="form-label">Secondary Color:</label>
                              <input type="color" id="secondaryColor" class="form-control form-control-color" value="#FFD700">
                            </div>
                          </div>
                          <div class="row mb-2">
                            <div class="col-md-6">
                              <label for="backgroundColor" class="form-label">Background Color:</label>
                              <input type="color" id="backgroundColor" class="form-control form-control-color" value="#222222">
                            </div>
                            <div class="col-md-6">
                              <label for="surfaceColor" class="form-label">Surface Color:</label>
                              <input type="color" id="surfaceColor" class="form-control form-control-color" value="#444444">
                            </div>
                          </div>
                          <div class="row mb-2">
                            <div class="col-md-6">
                              <label for="textColor" class="form-label">Text Color:</label>
                              <input type="color" id="textColor" class="form-control form-control-color" value="#E0E0E0">
                            </div>
                            <div class="col-md-6">
                              <label for="textSecondary" class="form-label">Secondary Text:</label>
                              <input type="color" id="textSecondary" class="form-control form-control-color" value="#C0C0C0">
                            </div>
                          </div>
                          <div class="row mb-2">
                            <div class="col-md-6">
                              <label for="textMuted" class="form-label">Muted Text:</label>
                              <input type="color" id="textMuted" class="form-control form-control-color" value="#A0A0A0">
                            </div>
                            <div class="col-md-6">
                              <label for="borderColor" class="form-label">Border Color:</label>
                              <input type="color" id="borderColor" class="form-control form-control-color" value="#00FF00">
                            </div>
                          </div>
                          <div class="mb-2">
                            <label for="fontFamily" class="form-label">Font Family:</label>
                            <select id="fontFamily" class="form-select">
                              <option value="'Share Tech Mono', monospace">Share Tech Mono (Default)</option>
                              <option value="Arial, sans-serif">Arial</option>
                              <option value="'Times New Roman', serif">Times New Roman</option>
                              <option value="'Courier New', monospace">Courier New</option>
                              <option value="'Roboto', sans-serif">Roboto (Google Font)</option>
                              <option value="'Open Sans', sans-serif">Open Sans (Google Font)</option>
                              <option value="'Lato', sans-serif">Lato (Google Font)</option>
                              <option value="'Fira Code', monospace">Fira Code (Google Font)</option>
                              <option value="'JetBrains Mono', monospace">JetBrains Mono (Google Font)</option>
                            </select>
                          </div>
                          <div class="row mb-2">
                            <div class="col-md-6">
                              <label for="faviconUrl" class="form-label">Favicon URL:</label>
                              <input type="url" id="faviconUrl" class="form-control" placeholder="https://example.com/favicon.ico">
                            </div>
                            <div class="col-md-6">
                              <label for="logoUrl" class="form-label">Logo URL:</label>
                              <input type="url" id="logoUrl" class="form-control" placeholder="https://example.com/logo.png">
                            </div>
                          </div>
                          
                          <h5 class="mt-4">Footer Management</h5>
                          <div class="mb-2">
                            <label for="footerText" class="form-label">Footer Text:</label>
                            <textarea id="footerText" class="form-control" rows="3" placeholder="Â© 2025 Your Site Name. All rights reserved."></textarea>
                          </div>
                          <div class="mb-2">
                            <label for="footerLinks" class="form-label">Footer Links (JSON format):</label>
                            <textarea id="footerLinks" class="form-control" rows="4" placeholder='[{"text": "Privacy Policy", "url": "/privacy"}, {"text": "Terms of Service", "url": "/terms"}]'></textarea>
                            <small class="text-muted">Format: [{"text": "Link Text", "url": "/path", "external": false}]</small>
                          </div>
                          
                          <h5 class="mt-4">Navigation Menu</h5>
                          <div class="mb-2">
                            <label for="menuLinks" class="form-label">Custom Menu Links (JSON format):</label>
                            <textarea id="menuLinks" class="form-control" rows="4" placeholder='[{"text": "About", "url": "/about"}, {"text": "Contact", "url": "/contact"}]'></textarea>
                            <small class="text-muted">Format: [{"text": "Link Text", "url": "/path", "external": false, "roles": ["user"]}]</small>
                          </div>
                          
                          <div class="mb-2">
                            <label for="customCss" class="form-label">Custom CSS:</label>
                            <textarea id="customCss" class="form-control" rows="6" placeholder="Enter custom CSS rules here..."></textarea>
                          </div>
                        </div>
                      </div>
                      <button id="themeSaveButton" class="btn btn-success btn-sm mt-3">Save Theme</button>
                      <button id="themeDeleteButton" class="btn btn-danger btn-sm mt-3 ms-2">Delete Theme</button>
                      <button id="themePreviewButton" class="btn btn-info btn-sm mt-3 ms-2">Preview Theme</button>
                      <div id="themeMessageDiv" class="mt-3 text-center"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="cms-settings" role="tabpanel" aria-labelledby="cms-settings-tab">
              <div class="row mt-4">
                <div class="col-12">
                  <h2>CMS Settings</h2>
                  
                  <!-- General Settings -->
                  <div class="card mb-4">
                    <div class="card-header">
                      <h4 class="mb-0">General Settings</h4>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="mb-3">
                            <label for="siteName" class="form-label">Site Name</label>
                            <input type="text" id="siteName" class="form-control" placeholder="Enter site name" maxlength="100">
                            <div class="form-text">
                              <span id="siteNameCounter">0</span>/100 characters
                            </div>
                          </div>
                          <div class="mb-3">
                            <label for="siteDescription" class="form-label">Site Description</label>
                            <textarea id="siteDescription" class="form-control" rows="3" placeholder="Enter site description" maxlength="500"></textarea>
                            <div class="form-text">
                              <span id="siteDescriptionCounter">0</span>/500 characters
                            </div>
                          </div>
                        </div>

                      </div>
                      <button id="saveGeneralSettings" class="btn btn-primary">Save General Settings</button>
                    </div>
                  </div>

                  <!-- Website Theme Settings -->
                  <div class="card mb-4">
                    <div class="card-header">
                      <h4 class="mb-0">Website Theme</h4>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-8">
                          <div class="mb-3">
                            <label for="activeThemeSelect" class="form-label">Active Website Theme</label>
                            <select id="activeThemeSelect" class="form-select">
                              <option value="">Loading themes...</option>
                            </select>
                            <small class="form-text text-muted">This theme will be applied to all public pages of the website</small>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="mb-3">
                            <label class="form-label">Theme Actions</label>
                            <div class="d-grid gap-2">
                              <button id="applyWebsiteTheme" class="btn btn-success btn-sm">Apply as Website Theme</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div id="currentThemeInfo" class="alert alert-info d-none">
                        <strong>Current Website Theme:</strong> <span id="currentThemeName">None</span><br>
                        <small id="currentThemeDescription">No description available</small>
                      </div>
                    </div>
                  </div>

                  <!-- Messages -->
                  <div id="cmsSettingsMessageDiv" class="mt-3"></div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="test-pages" role="tabpanel" aria-labelledby="test-pages-tab">
              <div class="row mt-4">
                <div class="col-12">
                  <h2>Test & Demo Pages</h2>
                  <p class="text-muted">Quick access to all test and demo pages for theme testing and development.</p>
                  
                  <!-- Main Pages -->
                  <div class="card mb-4">
                    <div class="card-header">
                      <h4 class="mb-0">Main Pages</h4>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Home Page</h5>
                              <p class="card-text">Main website homepage with navigation and theme features.</p>
                              <a href="/" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Message System Demo</h5>
                              <p class="card-text">Demonstration of the message system functionality.</p>
                              <a href="/message-system-demo.html" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Navigation Test</h5>
                              <p class="card-text">Test page for navigation components and theming.</p>
                              <a href="/nav/" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- User Authentication Pages -->
                  <div class="card mb-4">
                    <div class="card-header">
                      <h4 class="mb-0">Authentication & User Pages</h4>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Login Page</h5>
                              <p class="card-text">Standard login form with theme support.</p>
                              <a href="/login/" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Login Theme Demo</h5>
                              <p class="card-text">Special demo version of login with advanced theme features.</p>
                              <a href="/login/index-theme-demo.html" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">User Profile</h5>
                              <p class="card-text">User profile management page.</p>
                              <a href="/profile/" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Password Management</h5>
                              <p class="card-text">Password change and reset functionality.</p>
                              <a href="/password/" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Content Management Pages -->
                  <div class="card mb-4">
                    <div class="card-header">
                      <h4 class="mb-0">Content Management</h4>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Records Page</h5>
                              <p class="card-text">Content records display and management.</p>
                              <a href="/record/" target="_blank" class="btn btn-primary btn-sm">Open Page</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6 col-lg-4 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <h5 class="card-title">Admin Panel</h5>
                              <p class="card-text">Current admin panel (this page).</p>
                              <a href="/admin/" target="_blank" class="btn btn-secondary btn-sm">Open in New Tab</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Quick Actions -->
                  <div class="card mb-4">
                    <div class="card-header">
                      <h4 class="mb-0">Quick Theme Testing</h4>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6">
                          <h5>Test Current Theme</h5>
                          <p class="text-muted">Test the currently active website theme across different pages.</p>
                          <div class="btn-group-vertical w-100 mb-3" role="group">
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="window.open('/', '_blank')">Test on Homepage</button>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="window.open('/login/', '_blank')">Test on Login</button>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="window.open('/profile/', '_blank')">Test on Profile</button>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <h5>Development Tools</h5>
                          <p class="text-muted">Useful tools for theme development and testing.</p>
                          <div class="btn-group-vertical w-100 mb-3" role="group">
                            <button type="button" class="btn btn-outline-success btn-sm" onclick="openAllTestPages()">Open All Pages</button>
                            <button type="button" class="btn btn-outline-info btn-sm" onclick="refreshAllTestPages()">Refresh All Open Pages</button>
                            <button type="button" class="btn btn-outline-warning btn-sm" onclick="clearTestPageData()">Clear Test Data</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Information -->
                  <div class="alert alert-info">
                    <h5 class="alert-heading">ðŸ’¡ Theme Testing Tips</h5>
                    <ul class="mb-0">
                      <li>Use the <strong>CMS Settings</strong> tab to change the active website theme</li>
                      <li>Use the <strong>Themes</strong> tab to create, edit, and preview themes</li>
                      <li>Open multiple test pages to see how themes look across different content types</li>
                      <li>Test both light and dark themes, and various color combinations</li>
                      <li>Check responsive design by resizing browser windows</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
    
    <!-- Footer placeholder -->
    <footer class="footer mt-auto py-3" data-theme-footer="true">
      <div class="container text-center">
        <p class="mb-0">&copy; 2025 TypeScript CMS Admin Panel. All rights reserved.</p>
        <div data-theme-footer-links class="mt-2"></div>
      </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/js/theme-init.js" type="module"></script>
    <script src="/js/utils/cms-integration.js" type="module"></script>
    <script src="/include-nav.js" type="module"></script>
    <script src="/nav/script.js" type="module"></script>
    <script src="/admin/script.js" type="module"></script>
    <script src="/js/auth-redirect.js" type="module"></script>
  </body>
</html>
